<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Tickets</title>
  <link rel="stylesheet" href="style.css">
</head>

<body data-guard="admin">
  <canvas id="stars"></canvas>
  <header class="topbar">
    <div class="topbar-inner">
      <h1 class="brand">Support <span>Admin</span></h1>
      <div class="hero-actions">
        <button id="theme-toggle" class="btn-ghost">ðŸŒ™</button>
        <button id="logout" class="btn-ghost">Logout</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Requests Section -->
    <div style="margin-bottom: 30px;" class="card glass">
      <h3 style="margin-bottom:15px; border-bottom:1px solid var(--border); padding-bottom:10px;">Konto-Anfragen</h3>
      <div id="request-list"
        style="display:grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap:15px;"></div>
    </div>

    <div class="kanban-board">
      <!-- New Column -->
      <div class="column" id="col-new">
        <div class="col-header">
          <span>ðŸ†• Neu</span>
          <span class="count" id="count-new">0</span>
        </div>
        <div class="ticket-list" data-status="Neu" id="list-new"></div>
      </div>

      <!-- In Progress Column -->
      <div class="column" id="col-doing">
        <div class="col-header">
          <span>ðŸ”§ In Bearbeitung</span>
          <span class="count" id="count-doing">0</span>
        </div>
        <div class="ticket-list" data-status="In Bearbeitung" id="list-doing"></div>
      </div>

      <!-- Done Column -->
      <div class="column" id="col-done">
        <div class="col-header">
          <span>âœ… Geschlossen</span>
          <span class="count" id="count-done">0</span>
        </div>
        <div class="ticket-list" data-status="Geschlossen" id="list-done"></div>
      </div>
    </div>
  </main>

  <!-- Ticket Detail Modal -->
  <div class="modal-overlay" id="ticket-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="m-title">Ticket Title</h3>
        <button class="btn-ghost" id="m-close">âœ•</button>
      </div>
      <div class="modal-body">
        <p id="m-desc">Beschreibung...</p>
        <div class="field">
          <label>Zugewiesen an:</label>
          <select id="m-assignee">
            <option value="">Niemand</option>
          </select>
        </div>
        <!-- Comments -->
        <div class="comments-section">
          <h4>Kommentare</h4>
          <div id="m-comments"></div>
          <div class="field" style="margin-top: 10px;">
            <textarea id="m-new-comment" rows="2" placeholder="Kommentar schreiben..."></textarea>
            <button class="btn-primary" id="btn-add-comment" style="margin-top: 8px;">Senden</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-ghost" id="m-close-bt">SchlieÃŸen</button>
      </div>
    </div>
  </div>

  <!-- Approve User Modal (Moved outside) -->
  <div class="modal-overlay" id="approve-modal">
    <div class="modal" style="max-width: 400px;">
      <div class="modal-header">
        <h3>Benutzer erstellen</h3>
        <button class="btn-ghost" id="a-close">âœ•</button>
      </div>
      <div class="modal-body">
        <p>Erstelle einen Account fÃ¼r <strong id="a-name-disp"></strong>.</p>
        <div class="field">
          <label>Benutzername</label>
          <input type="text" id="a-username" placeholder="z.b. maxm">
        </div>
        <div class="field">
          <label>Passwort</label>
          <input type="text" id="a-password" value="123">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-ghost" id="a-cancel">Abbrechen</button>
        <button class="btn-primary" id="a-confirm">Erstellen</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>